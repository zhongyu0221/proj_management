{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="{% static 'img/favicon.ico' %}">
    <title>{% block page_title %} Epi T2D {% endblock page_title %}</title>
    {% block stylesheets %}
        <link rel="stylesheet" type="text/css"
              href="{% static 'assets/lib/perfect-scrollbar/css/perfect-scrollbar.css' %}"/>
        <link rel="stylesheet" type="text/css"
              href="{% static 'assets/lib/material-design-icons/css/material-design-iconic-font.min.css' %}"/>
        <link rel="stylesheet" type="text/css"
              href="{% static 'assets_bs5/node_modules/datatables.net-bs5/css/dataTables.bootstrap5.min.css' %}"/>
        {#              href="{% static 'assets/lib/datatables/datatables.net-bs4/css/dataTables.bootstrap4.css' %}"/>#}
        <link rel="stylesheet" type="text/css"
              href="{% static 'assets_bs5/node_modules/datatables.net-responsive-bs5/css/responsive.bootstrap5.min.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'assets/lib/fontawesome-free/css/all.css' %}"/>

        <link rel="stylesheet" href="{% static 'assets_bs5/node_modules/jquery-ui/dist/themes/base/jquery-ui.css' %}">
        <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.7.0/css/all.css">

        <link rel="stylesheet" type="text/css" href="{% static 'assets/css/app.css' %}"/>
    {% endblock stylesheets %}
</head>
<body>
{% block top-nav %}
    <div class="be-wrapper be-color-header be-nosidebar-left">
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top be-top-header">
        <div class="container-fluid">
            <div class="be-navbar-header"><a class="navbar-brand" href="/"></a>
            </div>
            <a class="be-toggle-top-header-menu collapsed" href="#" data-bs-toggle="collapse" aria-expanded="false"
               data-target="#be-navbar-collapse">Wihout Sidebars</a>
            <div class="navbar-collapse collapse" id="be-navbar-collapse">
                <ul class="navbar-nav navbar-light ml-auto">
                    {% if user.is_authenticated %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
                        <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#"
                                                         data-bs-toggle="dropdown" role="button" aria-expanded="false">Add
                            <span class="mdi mdi-caret-down"></span></a>
                            <div class="dropdown-menu" role="menu">
                                <a class="dropdown-item" href="{% url 'userprofiles:userprofiles_new' %}">Add New
                                    User</a>
                                {#                                <a class="dropdown-item" href="{% url 'patient_new' %}">Add New Patient</a>#}
                                {#                                <a class="dropdown-item" href="{% url 'surgery_new' %}">Add New Surgery</a>#}


                            </div>
                        </li>

                        <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#"
                                                         data-bs-toggle="dropdown" role="button" aria-expanded="false">View
                            <span class="mdi mdi-caret-down"></span></a>
                            <div class="dropdown-menu" role="menu">
                                <a class="dropdown-item" href="{% url 'userprofiles:userprofiles_list' %}">List All
                                    Users</a>

                                <a class="dropdown-item" href="{% url 'patients:patient_list' %}">List All Patients</a>
                                <a class="dropdown-item" href="{% url 'samples:sample_list' %}">List All Samples</a>
                                <a class="dropdown-item" href="{% url 'samples:extractions_list' %}">List All
                                    Extractions</a>


                            </div>
                        </li>
                        <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#"
                                                         data-bs-toggle="dropdown" role="button" aria-expanded="false">Reports
                            <span class="mdi mdi-caret-down"></span></a>
                            <div class="dropdown-menu" role="menu">

                                <a class="dropdown-item" href="{% url 'RedcapRetrieveFormView' %}"> Sync from Redcap</a>
                                {% comment %} <a class="dropdown-item" href="">Report 1</a>{% endcomment %}
                            </div>

                        </li>
                        <li><a class="nav-link" href="">Welcome {{ user.first_name }}</a></li>
                        <li><a id="logout-link" class="nav-link" href="{% url 'logout' %}">LOGOUT</a></li>
                    {% else %}
                        <li><a href="#" class="nav-link">About</a></li>
                        <li><a href="{% url 'login' %}" class="nav-link">Login</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
{% endblock top-nav %}
<div class="be-content">
    <div class="main-content container-fluid">

        {% block contents %}
        {% endblock contents %}
    </div>
</div>
</div>

{% block javascript %}
    <script src="{% static 'assets_bs5/node_modules/jquery/dist/jquery.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/perfect-scrollbar/dist/perfect-scrollbar.min.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/jquery-ui/dist/jquery-ui.min.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets/lib/jquery-form/jquery.form.min.js' %}" type="text/javascript"></script>

    <script src="{% static 'assets/js/app.js' %}" type="text/javascript"></script>

    <script src="{% static 'assets_bs5/node_modules/datatables.net/js/jquery.dataTables.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/datatables.net-bs5/js/dataTables.bootstrap5.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/datatables.net-buttons/js/dataTables.buttons.min.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/datatables.net-buttons/js/buttons.flash.min.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/jszip/dist/jszip.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/pdfmake/build/pdfmake.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/pdfmake/build/vfs_fonts.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/datatables.net-buttons/js/buttons.colVis.min.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/datatables.net-buttons/js/buttons.print.min.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/datatables.net-buttons/js/buttons.html5.min.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/datatables.net-buttons-bs5/js/buttons.bootstrap5.min.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/datatables.net-responsive/js/dataTables.responsive.min.js' %}"
            type="text/javascript"></script>
    <script src="{% static 'assets_bs5/node_modules/datatables.net-responsive-bs5/js/responsive.bootstrap5.min.js' %}"
            type="text/javascript"></script>
{% endblock javascript %}
{% block modal %}
    <script>
        $(document).on('click', '.load-modal', function (e) {
            e.preventDefault();
            var url = $(this).attr('href');

            $('#myModal .modal-content').load(url, function () {
                $('#myModal').modal('show');
            });
        });

        // Keep this if you support multiple modals
        $(document).on('show.bs.modal', '.modal', function () {
            var zIndex = 1040 + (10 * $('.modal:visible').length);
            $(this).css('z-index', zIndex);
            setTimeout(function () {
                $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
            }, 0);
        });

        // Cleanup on modal close
        $('body').on('hidden.bs.modal', '.modal', function () {
            $(this).removeData('bs.modal');
            $('.modal:visible').length && $(document.body).addClass('modal-open');
        });
    </script>
    <script>
        $('#myModal').on('show.bs.modal', function () {
            $(this).find('.modal-body').css({
                width: 'auto', //probably not needed
                height: 'auto', //probably not needed
                'max-height': '100%'

            });
        });


        $('body').on('hidden.bs.modal', '.modal', function () {
            $(this).removeData('bs.modal');
            $('.modal:visible').length && $(document.body).addClass('modal-open');
        });

    </script>
    <script>

        $('.btn-action').click(function () {
            var url = $(this).data("url");
            $.ajax({
                type: "GET",
                url: url,
                dataType: 'html',
                success: function (res) {
                    // update modal content
                    $('.modal-content').html(res);
                    // show modal
                    $('#myModal').modal('show');

                },
                error: function (request, status, error) {
                    console.log("ajax call went wrong:" + request.responseText);
                }
            });
        });
    </script>
{% endblock modal %}
{% block beagle-init %}
    <script type="text/javascript">
        $(document).ready(function () {
            //-initialize the javascript
            App.init();
        });
    </script>
{% endblock beagle-init %}
{% block page-js %}

{% endblock page-js %}
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!-- form will load here -->
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

        </div>
    </div>
</div><!-- /.modal -->

<!-- Modal -->
<div class="modal fade" id="searchResultModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

        </div>
    </div>
</div><!-- /.modal -->
<script>
    $(document).ready(function () {
        $("#logout-link").click(function (e) {
            e.preventDefault();
            $.post("{% url 'logout' %}", {'csrfmiddlewaretoken': '{{ csrf_token }}'}, function (data) {
                // Redirect to a logout success page or the site homepage
                window.location.href = "{% url 'home' %}";
            });
        });
    });
</script>
</body>
</html>